---
title: 数组扁平化
date: 2021-08-20 17:00:31
permalink: /pages/fd6625/
categories:
  - 前端
  - JavaScript
tags:
  -
---

## 几种方法如下

1. toString + split
2. join + split
3. Array.prototype.flat(Infinity)
4. reduce + concat + isArray 递归实现
5. Use a stack 堆栈非递归
6. Use Generator function 生成器

### toString + split

```ts
function flatDeep(array: any[]): number[] {
  return array
    .toString()
    .split(',')
    .map((item) => Number(item))
}
```

### join + split

```ts
function flatDeep(array: any[]): number[] {
  return array
    .join()
    .split(',')
    .map((item) => Number(item))
}
```

### Array.prototype.flat(Infinity)

```ts
function flatDeep(array): number[] {
  return array.flat(Infinity)
}
```

### reduce + concat + isArray 递归实现

```ts
function flatDeep(array: any[], depth = 1): number[] {
  return depth > 0
    ? array.reduce((pre, cur, index, arr) => {
        return pre.concat(Array.isArray(cur) ? flatDeep(cur, depth - 1) : cur)
      }, [])
    : array.slice()
}
```

## 总结

数组扁平化的方法有：

1. toString + split
2. join + split
3. Array.prototype.flat(Infinity)
4. reduce + concat + isArray 递归实现
5. Use a stack
6. Use Generator function 生成器
